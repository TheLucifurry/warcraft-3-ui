{"version":3,"file":"Cursor.676686b3.js","sources":["../../src/components/base/Cursor.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, getCurrentInstance, onMounted, onUnmounted, PropType, ref } from 'vue';\nimport { useConfig } from '../ConfigProvider';\n\ntype CursorState =\n  | 'default'\n  | 'default-active'\n  | 'pointer'\n  | 'pointer-active'\n  | 'pointer-denied'\n  | 'hold'\n  | 'arrow-top'\n  | 'arrow-right'\n  | 'arrow-bottom'\n  | 'arrow-left'\n\nconst props = defineProps({\n  state: {\n    type: String as PropType<CursorState>,\n    default: () => 'default',\n  },\n  // color: { // TODO: Finish this feature (its hard to mix color and sprites with alpha via css)\n  //   type: String,\n  //   default: () => '#0000',\n  // }\n});\n\nconst {theme} = useConfig();\nconst cursorEl = ref<HTMLElement | null>(null);\nconst cursorPlaceEl = ref<HTMLElement | null>(null);\nconst spriteUrl = computed(() => `url(${resolvedPath(`../../assets/${theme}/cursor.png`)}`);\n\nfunction resolvedPath(path: string) {\n  return new URL(path, import.meta.url).href\n}\n\nfunction moveCursor(e: MouseEvent) {\n  if(!cursorEl.value) return;\n  cursorEl.value.style.transform = `translate(${e.pageX}px, ${e.pageY}px)`;\n}\n\n\nonMounted(() => {\n  cursorPlaceEl.value = getCurrentInstance()?.proxy?.$el.parentElement;\n  if(!cursorPlaceEl?.value) {\n    throw new Error('[warcraft-3-ui]: Cursor - element from \"to\" prop not found or something went wrong')\n  }\n\n  cursorPlaceEl.value.addEventListener('mousemove', moveCursor);\n  cursorPlaceEl.value.classList.add('cursored');\n})\n\nonUnmounted(()=>{\n  if(cursorPlaceEl.value){\n    cursorPlaceEl.value.removeEventListener('mousemove', moveCursor);\n    cursorPlaceEl.value.classList.remove('cursored');\n  }\n})\n</script>\n\n<template>\n  <div ref=\"cursorEl\" class=\"cursor__container\">\n    <div :class=\"`cursor cursor--${props.state}`\" />\n  </div>\n</template>\n\n<style lang=\"scss\">\n$tile-size: 32px;\n\n.cursored{\n  cursor: none;\n  & * {\n    cursor: none;\n  }\n}\n.cursor {\n  position: relative;\n  width: $tile-size;\n  height: $tile-size;\n  background: v-bind(spriteUrl) no-repeat;\n  // mix-blend-mode: color;\n  // border: 1px solid orange;\n\n  &__container {\n    top: 0;\n    left: 0;\n    position: fixed;\n    z-index: 99;\n    pointer-events: none;\n    // background-color: v-bind('props.color');\n  }\n\n  &--default-active {\n    animation: cursor-active 500ms steps(8) infinite;\n  }\n  &--pointer {\n    background-position: (-$tile-size * 1) (-$tile-size * 3);\n  }\n  &--pointer-active {\n    animation: cursor-pointer 500ms steps(8) infinite;\n  }\n  &--pointer-denied {\n    background-position: (-$tile-size * 2) (-$tile-size * 3);\n  }\n  &--hold {\n    background-position: (-$tile-size * 4) (-$tile-size * 3);\n  }\n  &--arrow-top {\n    animation: cursor-arrow 100ms steps(3) infinite;\n    transform: rotate(-90deg)\n  }\n  &--arrow-right {\n    animation: cursor-arrow 100ms steps(3) infinite;\n  }\n  &--arrow-bottom {\n    animation: cursor-arrow 100ms steps(3) infinite;\n    transform: rotate(90deg)\n  }\n  &--arrow-left {\n    animation: cursor-arrow 100ms steps(3) infinite;\n    transform: rotate(-180deg)\n  }\n}\n\n@keyframes cursor-active {\n   from { background-position: 0 0; }\n   to { background-position: (-$tile-size * 8) 0; }\n}\n@keyframes cursor-pointer {\n   from { background-position: 0 (-$tile-size * 2); }\n   to { background-position: (-$tile-size * 8) (-$tile-size * 2); }\n}\n@keyframes cursor-arrow {\n   from { background-position: (-$tile-size * 5) (-$tile-size * 3); }\n   to { background-position: (-$tile-size * 8) (-$tile-size * 3); }\n}\n</style>\n"],"names":["theme","useConfig","cursorEl","ref","cursorPlaceEl","spriteUrl","computed","resolvedPath","path","__name","moveCursor","e","onMounted","_b","_a","getCurrentInstance","onUnmounted"],"mappings":"4YA2BM,KAAA,CAAC,MAAAA,GAASC,IACVC,EAAWC,EAAwB,IAAI,EACvCC,EAAgBD,EAAwB,IAAI,EAC5CE,EAAYC,EAAS,IAAM,OAAOC,EAAa,gBAAgBP,cAAkB,GAAG,EAE1F,SAASO,EAAaC,EAAc,CAClC,OAAO,IAAI,IAAIA,EAAM,YAAY,GAAG,EAAE,IACxC,CAFSC,EAAAF,EAAA,gBAIT,SAASG,EAAWC,EAAe,CAC9B,CAACT,EAAS,QACbA,EAAS,MAAM,MAAM,UAAY,aAAaS,EAAE,YAAYA,EAAE,WAChE,CAHS,OAAAF,EAAAC,EAAA,cAMTE,EAAU,IAAM,SAEX,GADHR,EAAc,OAAQS,GAAAC,EAAAC,EAAA,IAAA,YAAAD,EAAsB,QAAtB,YAAAD,EAA6B,IAAI,cACpD,EAACT,GAAA,MAAAA,EAAe,OACX,MAAA,IAAI,MAAM,oFAAoF,EAGxFA,EAAA,MAAM,iBAAiB,YAAaM,CAAU,EAC9CN,EAAA,MAAM,UAAU,IAAI,UAAU,CAAA,CAC7C,EAEDY,EAAY,IAAI,CACXZ,EAAc,QACDA,EAAA,MAAM,oBAAoB,YAAaM,CAAU,EACjDN,EAAA,MAAM,UAAU,OAAO,UAAU,EACjD,CACD"}